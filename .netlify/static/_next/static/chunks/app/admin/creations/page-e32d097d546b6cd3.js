(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5905],{86956:function(e,s,i){Promise.resolve().then(i.bind(i,20666)),Promise.resolve().then(i.t.bind(i,231,23))},20666:function(e,s,i){"use strict";i.d(s,{default:function(){return x}});var r=i(57437),t=i(2265),n=i(87138),c=i(66648),l=i(16463),a=i(26975),d=i(50495),o=i(18422),u=i(90399),h=i(6780),p=i(30311),f=i(37440);function x(e){let{creations:s}=e,i=(0,l.useRouter)(),{toast:x}=(0,p.pm)(),[j,m]=(0,t.useState)(null),v=async e=>{m(e);try{if(!(await fetch("/api/creations/".concat(e),{method:"DELETE"})).ok)throw Error("La suppression a \xe9chou\xe9");x({title:"Succ\xe8s",description:"La cr\xe9ation a \xe9t\xe9 supprim\xe9e."}),i.refresh()}catch(e){console.error("Erreur lors de la suppression:",e),x({title:"Erreur",description:"Impossible de supprimer la cr\xe9ation."})}finally{m(null)}};return(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(a.iA,{children:[(0,r.jsx)(a.xD,{children:(0,r.jsxs)(a.SC,{children:[(0,r.jsx)(a.ss,{className:"w-[80px]",children:"Image"}),(0,r.jsx)(a.ss,{children:"Titre"}),(0,r.jsx)(a.ss,{className:"w-[150px]",children:"Date"}),(0,r.jsx)(a.ss,{className:"w-[120px] text-right",children:"Actions"})]})}),(0,r.jsx)(a.RM,{children:s.map(e=>(0,r.jsxs)(a.SC,{children:[(0,r.jsx)(a.pj,{children:(0,r.jsx)(c.default,{src:e.image||"/images/default-recipe.jpg",alt:e.title,width:50,height:50,className:"rounded object-cover aspect-square"})}),(0,r.jsx)(a.pj,{className:"font-medium",children:e.title}),(0,r.jsx)(a.pj,{children:(0,f.p)(e.createdAt)}),(0,r.jsxs)(a.pj,{className:"text-right space-x-2",children:[(0,r.jsx)(d.z,{variant:"outline",size:"icon",asChild:!0,children:(0,r.jsxs)(n.default,{href:"/admin/creations/".concat(e.id,"/edit"),children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Modifier"})]})}),(0,r.jsxs)(h.aR,{children:[(0,r.jsx)(h.vW,{asChild:!0,children:(0,r.jsxs)(d.z,{variant:"destructive",size:"icon",disabled:j===e.id,children:[(0,r.jsx)(u.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Supprimer"})]})}),(0,r.jsxs)(h._T,{children:[(0,r.jsxs)(h.fY,{children:[(0,r.jsx)(h.f$,{children:"\xcates-vous s\xfbr ?"}),(0,r.jsxs)(h.yT,{children:['Cette action est irr\xe9versible et supprimera d\xe9finitivement la cr\xe9ation "',e.title,'".']})]}),(0,r.jsxs)(h.xo,{children:[(0,r.jsx)(h.le,{disabled:j===e.id,children:"Annuler"}),(0,r.jsx)(h.OL,{onClick:()=>v(e.id),disabled:j===e.id,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:j===e.id?"Suppression...":"Supprimer"})]})]})]})]})]},e.id))})]})})}},66648:function(e,s,i){"use strict";i.d(s,{default:function(){return t.a}});var r=i(55601),t=i.n(r)},55601:function(e,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var i in s)Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}(s,{default:function(){return a},getImageProps:function(){return l}});let r=i(99920),t=i(80497),n=i(38173),c=r._(i(21241));function l(e){let{props:s}=(0,t.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,i]of Object.entries(s))void 0===i&&delete s[e];return{props:s}}let a=n.Image}},function(e){e.O(0,[4868,231,8173,6951,9332,5971,2971,7023,1744],function(){return e(e.s=86956)}),_N_E=e.O()}]);