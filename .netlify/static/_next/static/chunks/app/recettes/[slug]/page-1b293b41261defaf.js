(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2082],{42811:function(e,t,n){Promise.resolve().then(n.bind(n,61192)),Promise.resolve().then(n.t.bind(n,38173,23)),Promise.resolve().then(n.t.bind(n,186,23))},61192:function(e,t,n){"use strict";n.d(t,{CookingModeWrapper:function(){return F}});var s=n(57437),r=n(2265),i=n(34446),a=n(98687),l=n(50495),c=n(16423),o=n(49593),d=n(74697),u=n(6540),m=n(98960),f=n(34996),x=n(42555),h=n(48298),g=n(24841),p=n(98094),b=n(49590),v=n(88002),j=n(11240),w=n(92513),N=n(92940),y=n(62447),k=n(37440);let E=y.fC,z=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(y.aV,{ref:t,className:(0,k.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...r})});z.displayName=y.aV.displayName;let S=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(y.xz,{ref:t,className:(0,k.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...r})});S.displayName=y.xz.displayName;let C=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(y.VY,{ref:t,className:(0,k.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...r})});C.displayName=y.VY.displayName;let Z=e=>{let{recipeTitle:t,steps:n,ingredients:y,basePortions:k,onClose:Z}=e,[F,M]=(0,r.useState)(0),[R,D]=(0,r.useState)(new Set),[P,V]=(0,r.useState)(!1),[L,_]=(0,r.useState)(0),[q,I]=(0,r.useState)(!1),[T,A]=(0,r.useState)(!1),[O,U]=(0,r.useState)(k),[W,Y]=(0,r.useState)(new Set),[B,Q]=(0,r.useState)(!1),G=(0,r.useCallback)(()=>{F<n.length-1&&M(F+1)},[F,n.length]),H=(0,r.useCallback)(()=>{F>0&&M(F-1)},[F]),J=e=>{D(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},K=n[F],X=R.has(K.id),$=n.length;(0,r.useEffect)(()=>{let e=e=>{"ArrowRight"===e.key?(e.preventDefault(),G()):"ArrowLeft"===e.key&&(e.preventDefault(),H())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[H,G]),(0,r.useEffect)(()=>{let e=()=>{V(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]),(0,r.useEffect)(()=>{let e=K.duration;e&&e>0?(_(e),I(!1),A(!1)):(_(0),I(!1),A(!0)),e||R.has(K.id)},[F,K.duration,K.id,R]),(0,r.useEffect)(()=>{let e=null;return q&&L>0?e=setInterval(()=>{_(e=>e-1)},1e3):0===L&&q&&(I(!1),A(!0)),()=>{e&&clearInterval(e)}},[q,L,K.id]);let ee=F===$-1,et=e=>{if(!k||k<=0)return e.toString();let t=e*O/k;return t%1!=0?t.toFixed(1):t.toString()};return(0,r.useEffect)(()=>{let e=new Set;n.forEach(t=>{R.has(t.id)&&t.ingredientsUsed&&t.ingredientsUsed.forEach(t=>e.add(t))}),Y(e)},[R,n]),(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-background/90 backdrop-blur-sm flex items-center justify-center p-2 md:p-4",children:(0,s.jsxs)("div",{className:"bg-card text-card-foreground rounded-lg shadow-xl w-full max-w-4xl max-h-[95vh] flex flex-col border overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold truncate mr-2",children:[t," - Mode Cuisine"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(l.z,{variant:"ghost",size:"icon",onClick:()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(e=>{console.error("Erreur lors du passage en plein \xe9cran : ".concat(e.message," (").concat(e.name,")"))})},title:P?"Quitter le plein \xe9cran":"Passer en plein \xe9cran",children:P?(0,s.jsx)(c.Z,{className:"h-5 w-5"}):(0,s.jsx)(o.Z,{className:"h-5 w-5"})}),(0,s.jsx)(l.z,{variant:"ghost",size:"icon",onClick:Z,title:"Fermer le mode cuisine",children:(0,s.jsx)(d.Z,{className:"h-5 w-5"})})]})]}),(0,s.jsxs)("div",{className:"w-full px-4 pt-2 pb-4 border-b",children:[(0,s.jsxs)("div",{className:"text-sm text-center text-muted-foreground mb-1",children:["\xc9tape ",F+1," / ",$]}),(0,s.jsx)("div",{className:"w-full h-2 bg-pink-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-pink-500 transition-all duration-300 ease-in-out",style:{width:"".concat((F+1)/$*100,"%")}})})]}),(0,s.jsxs)(E,{defaultValue:"etapes",className:"flex-grow flex flex-col overflow-hidden",children:[(0,s.jsxs)(z,{className:"grid w-full grid-cols-2 rounded-none border-b",children:[(0,s.jsxs)(S,{value:"etapes",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"})," \xc9tapes"]}),(0,s.jsxs)(S,{value:"ingredients",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 mr-2"})," Ingr\xe9dients"]})]}),(0,s.jsx)(C,{value:"etapes",className:"flex-grow overflow-y-auto p-4 md:p-6 bg-pink-50 dark:bg-gray-800/50 focus-visible:ring-0 focus-visible:ring-offset-0",children:(0,s.jsx)(i.M,{mode:"wait",children:(0,s.jsxs)(a.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},className:"flex flex-col space-y-4 transition-all duration-300 ".concat(X?"bg-green-50 dark:bg-green-900/30 ring-1 ring-green-400 dark:ring-green-600 rounded-lg p-3 -m-3 md:-m-4":""),children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("button",{onClick:()=>J(K.id),className:"mt-1 flex-shrink-0",title:X?"Marquer comme non termin\xe9e":"Marquer comme termin\xe9e",children:X?(0,s.jsx)(a.E.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.2},children:(0,s.jsx)(f.Z,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}):(0,s.jsx)(x.Z,{className:"h-6 w-6 text-muted-foreground"})}),(0,s.jsx)("p",{className:"flex-grow text-lg md:text-xl leading-relaxed ".concat(X?"line-through text-muted-foreground":""),children:K.description})]}),"number"==typeof K.duration&&K.duration>0&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-4 pt-2 border-t border-dashed mt-4",children:[(0,s.jsx)(h.Z,{className:"h-6 w-6 text-pink-600"}),(0,s.jsx)("span",{className:"text-2xl font-semibold tabular-nums ".concat(T?"text-green-600":"text-pink-600"),children:"".concat(Math.floor(L/60).toString().padStart(2,"0"),":").concat((L%60).toString().padStart(2,"0"))}),!T&&(0,s.jsx)(s.Fragment,{children:q?(0,s.jsxs)(l.z,{variant:"outline",size:"icon",onClick:()=>I(!1),title:"Pause",children:[" ",(0,s.jsx)(g.Z,{className:"h-4 w-4"})," "]}):(0,s.jsxs)(l.z,{variant:"outline",size:"icon",onClick:()=>I(!0),title:"D\xe9marrer",children:[" ",(0,s.jsx)(p.Z,{className:"h-4 w-4"})," "]})}),(0,s.jsxs)(l.z,{variant:"ghost",size:"icon",onClick:()=>{K.duration&&(_(K.duration),I(!1),A(!1))},title:"R\xe9initialiser",children:[" ",(0,s.jsx)(b.Z,{className:"h-4 w-4"})," "]})]})]},K.id)})}),(0,s.jsxs)(C,{value:"ingredients",className:"flex-grow overflow-y-auto p-4 md:p-6 bg-muted/30 focus-visible:ring-0 focus-visible:ring-offset-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-4 sticky top-0 bg-muted/50 py-2 -mx-4 px-4 border-b",children:[(0,s.jsxs)(l.z,{variant:"outline",size:"icon",onClick:()=>{U(e=>Math.max(e-1,1))},disabled:O<=1,className:"h-7 w-7",children:[" ",(0,s.jsx)(v.Z,{className:"h-4 w-4"})," "]}),(0,s.jsxs)("div",{className:"text-center flex-grow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center font-semibold",children:[" ",(0,s.jsx)(j.Z,{className:"h-4 w-4 mr-1.5 text-muted-foreground"})," ",O," "]}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[" ",O>1?"personnes":"personne"," "]})]}),(0,s.jsxs)(l.z,{variant:"outline",size:"icon",onClick:()=>{U(e=>Math.min(e+1,12))},disabled:O>=12,className:"h-7 w-7",children:[" ",(0,s.jsx)(w.Z,{className:"h-4 w-4"})," "]})]}),(0,s.jsx)("ul",{className:"space-y-1.5 text-sm",children:y.map(e=>{let t=W.has(e.name);return(0,s.jsxs)("li",{className:"flex justify-between items-center transition-opacity duration-300 ".concat(t?"opacity-50":"opacity-100"),children:[(0,s.jsxs)("span",{className:"".concat(t?"line-through text-muted-foreground":""),children:[" ",e.name," "]}),(0,s.jsxs)("span",{className:"text-right font-medium text-muted-foreground ".concat(t?"line-through":""),children:[" ",et(e.quantity)," ",e.unit," "]})]},e.id)})}),W.size===y.length&&y.length>0&&(0,s.jsx)("p",{className:"text-xs text-center text-green-600 mt-4 font-medium",children:"Ingr\xe9dients utilis\xe9s ✔️"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-t bg-muted/50",children:[(0,s.jsx)(l.z,{variant:"outline",onClick:H,disabled:0===F,children:"Pr\xe9c\xe9dent"}),ee?(0,s.jsx)(a.E.div,{animate:B?{scale:[1,1.1,1],transition:{duration:.4}}:{},children:(0,s.jsx)(l.z,{onClick:()=>{console.log("Recette termin\xe9e !"),Q(!0),setTimeout(()=>{Z()},1200)},disabled:B,className:"bg-green-600 hover:bg-green-700 text-white transition-all duration-300 ".concat(B?"px-4":"px-3"),children:B?(0,s.jsxs)(a.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.1,duration:.3},className:"flex items-center justify-center",children:[(0,s.jsx)(N.Z,{className:"h-5 w-5 mr-2"})," Termin\xe9 !"]}):"\uD83C\uDF89 Finir la recette"})}):(0,s.jsx)(l.z,{onClick:G,children:"Suivant"})]})]})})};function F(e){let{recipeTitle:t,steps:n,ingredients:i,basePortions:a,children:l}=e,[c,o]=(0,r.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[r.isValidElement(l)?r.cloneElement(l,{onClick:()=>o(!0)}):l,c&&(0,s.jsx)(Z,{recipeTitle:t,steps:n,ingredients:i,basePortions:a,onClose:()=>o(!1)})]})}},50495:function(e,t,n){"use strict";n.d(t,{d:function(){return c},z:function(){return o}});var s=n(57437),r=n(2265),i=n(71538),a=n(13027),l=n(37440);let c=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:o=!1,...d}=e,u=o?i.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:r,size:a,className:n})),ref:t,...d})});o.displayName="Button"},37440:function(e,t,n){"use strict";n.d(t,{cn:function(){return i},p:function(){return a}});var s=n(44839),r=n(96164);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,s.W)(t))}function a(e){if(!e)return"";let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return"";try{return t.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}catch(t){return console.error("Erreur lors du formatage de la date:",e,t),""}}}},function(e){e.O(0,[6426,4868,8173,8687,3658,2971,7023,1744],function(){return e(e.s=42811)}),_N_E=e.O()}]);